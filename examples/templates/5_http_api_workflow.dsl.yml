version: "0.5.0"
kind: app

metadata:
  name: "HTTP API Workflow"
  description: "å¤–éƒ¨APIã‚’å‘¼ã³å‡ºã™ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼"
  icon: "ğŸŒ"
  icon_background: "#f5f5f5"

app:
  name: "HTTP API Workflow"
  mode: "workflow"
  description: "å¤–éƒ¨APIã‚’å‘¼ã³å‡ºã™ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼"
  icon: "ğŸŒ"
  icon_background: "#f5f5f5"

workflow:
  variable_pool:
    - variable_name: "query"
      type: "string"
      description: "æ¤œç´¢ã‚¯ã‚¨ãƒª"
      value: ""

  nodes:
    - id: "start"
      title: "é–‹å§‹"
      type: "start"
      position:
        x: 100
        y: 100
      data: {}

    - id: "http-api"
      title: "APIå‘¼ã³å‡ºã—"
      type: "http_request"
      position:
        x: 300
        y: 100
      data:
        method: "GET"
        url: "https://api.example.com/search"
        headers:
          "Content-Type": "application/json"
          "User-Agent": "Dify-Creator/1.0"
        params:
          q: "{{query}}"
        timeout: 30

    - id: "process-response"
      title: "ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‡¦ç†"
      type: "llm"
      position:
        x: 500
        y: 100
      data:
        provider_name: "anthropic"
        model_name: "claude-3-5-sonnet-20241022"
        temperature: 0.5
        max_tokens: 1000
        prompt_template: |
          Please process and summarize the following API response:

          {{api_response}}

          Provide a clear and concise summary.
        variables:
          - name: "api_response"
            type: "string"
            required: true
        outputs:
          - name: "text"
            type: "string"

    - id: "end"
      title: "çµ‚äº†"
      type: "end"
      position:
        x: 700
        y: 100
      data:
        outputs:
          - variable: "process-response.text"

  connections:
    - source:
        node_id: "start"
        output: "output"
      target:
        node_id: "http-api"
        input_from: "context"

    - source:
        node_id: "http-api"
        output: "response"
      target:
        node_id: "process-response"
        input_from: "api_response"

    - source:
        node_id: "process-response"
        output: "text"
      target:
        node_id: "end"
        input_from: "input"

dependencies:
  providers:
    - name: "anthropic"
      version: "1.0.0"
